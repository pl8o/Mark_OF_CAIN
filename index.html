<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Candle For Jürgen</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    background-color: black;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    flex-direction: column;
    cursor: pointer; /* hint user can tap to start audio */
  }

  #candle {
    width: 150px;
    height: auto;
    margin-bottom: 40px;
  }

  #text {
    font-family: 'Arial', sans-serif;
    font-size: 3em;
    color: #40E0D0;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    position: relative;
  }

  .letter {
    opacity: 0;
    text-shadow: 0 0 5px #40E0D0, 0 0 10px #40E0D0, 0 0 15px #40E0D0;
    animation: flicker 1s infinite;
    display: inline-block;
  }

  @keyframes flicker {
    0%, 100% { opacity: 0.8; transform: translate(0, 0); }
    20% { opacity: 1; transform: translate(-1px, 1px); }
    40% { opacity: 0.9; transform: translate(1px, -1px); }
    60% { opacity: 1; transform: translate(-1px, 0); }
    80% { opacity: 0.95; transform: translate(1px, 1px); }
  }

  #text::before {
    content: '';
    position: absolute;
    width: 80%;
    height: 20%;
    background: radial-gradient(circle, rgba(64,224,208,0.4), transparent);
    z-index: -1;
    animation: auraPulse 2s infinite;
  }

  @keyframes auraPulse {
    0%, 100% { opacity: 0.4; transform: scale(1); }
    50% { opacity: 0.7; transform: scale(1.05); }
  }

  #tapMessage {
    position: absolute;
    top: 20px;
    font-family: Arial, sans-serif;
    color: #40E0D0;
    font-size: 1em;
    opacity: 0.7;
    user-select: none;
  }
</style>
</head>
<body>

<div id="tapMessage">Tap anywhere to start the candle music</div>

<img id="candle" src="https://media.tenor.com/t9lIrqinJnMAAAAM/%D1%81%D0%BF%D1%96%D0%B2%D1%87%D1%83%D0%B2%D0%B0%D1%8E-candle.gif" alt="Candle">

<div id="text"></div>

<audio id="bg-music" loop>
  <source src="https://github.com/pl8o/Mark_OF_CAIN/raw/refs/heads/main/Gymnope%CC%81die%20No.%201.mp4" type="audio/mp4">
</audio>

<script>
const words = ["A", "Candle", "For", "Jürgen"];
const textContainer = document.getElementById('text');
let wordIndex = 0;

// Show each word letter by letter with flicker
function showWord() {
  textContainer.innerHTML = '';
  const word = words[wordIndex];

  for (let i = 0; i < word.length; i++) {
    const span = document.createElement('span');
    span.className = 'letter';
    span.textContent = word[i];
    span.style.animationDuration = (0.8 + Math.random() * 0.5) + 's';
    span.style.transform = `translate(${Math.random()*2-1}px, ${Math.random()*2-1}px)`;
    span.style.opacity = 1;
    textContainer.appendChild(span);
  }

  let displayTime = 1500; // default time between words
  if(word === "Jürgen") displayTime = 3000; // longer pause for the name
  wordIndex++;
  if(wordIndex >= words.length) {
    wordIndex = 0;
    displayTime = 3000; // pause before restarting sequence
  }
  setTimeout(showWord, displayTime);
}

// Start the word sequence after 1s
setTimeout(showWord, 1000);

// Handle audio autoplay
const audio = document.getElementById('bg-music');
audio.volume = 0;

// Function to fade in audio
function fadeInAudio() {
  let v = 0;
  const fade = setInterval(() => {
    if (v < 0.45) {
      v += 0.01;
      audio.volume = v;
    } else {
      clearInterval(fade);
    }
  }, 120);
}

// Try to play immediately
window.addEventListener('load', () => {
  audio.play().then(() => {
    fadeInAudio();
    document.getElementById('tapMessage').style.display = 'none';
  }).catch(() => {
    // Autoplay blocked: wait for user interaction
    const startAudio = () => {
      audio.play();
      fadeInAudio();
      document.removeEventListener('click', startAudio);
      document.getElementById('tapMessage').style.display = 'none';
    };
    document.addEventListener('click', startAudio);
  });
});
</script>

</body>
</html>
