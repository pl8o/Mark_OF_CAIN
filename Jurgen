<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>A Candle For Jürgen</title>
<style>
body {
    margin: 0;
    height: 100vh;
    background-color: black;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    font-family: Arial, sans-serif;
    overflow: hidden;
}

.caption-container {
    position: relative;
    margin-top: 40px;
    height: 4rem;
    width: 100%;
}

.aura {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    height: 100%;
    border-radius: 8px;
    filter: blur(14px);
    opacity: 0.35;
    background: radial-gradient(circle, rgba(0,191,255,0.4) 0%, rgba(0,191,255,0) 70%);
    z-index: 1;
    transition: opacity 0.2s ease, transform 0.2s ease;
}

.word-container {
    position: relative;
    width: 100%;
    height: 4rem;
    display: flex;
    justify-content: center;
    align-items: center;
}

.word {
    display: flex;
    white-space: nowrap;
    opacity: 0;
}

.letter {
    display: inline-block;
    font-size: 2rem;
    color: #00BFFF;
    text-shadow: 0 0 8px rgba(0,191,255,0.6),
                 0 0 12px rgba(0,191,255,0.4),
                 0 0 18px rgba(0,191,255,0.3);
    opacity: 0;
    transition: transform 0.2s, opacity 0.4s;
    margin-right: 1px;
}

.candle-container {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
}

img {
    max-width: 100%;
    height: auto;
}

/* Flicker keyframes */
@keyframes flicker {
    0%   { text-shadow: 0 0 8px rgba(0,191,255,0.6),0 0 12px rgba(0,191,255,0.4),0 0 18px rgba(0,191,255,0.3); }
    20%  { text-shadow: 0 0 9px rgba(0,191,255,0.7),0 0 13px rgba(0,191,255,0.5),0 0 20px rgba(0,191,255,0.35); }
    40%  { text-shadow: 0 0 7px rgba(0,191,255,0.5),0 0 11px rgba(0,191,255,0.35),0 0 16px rgba(0,191,255,0.25); }
    60%  { text-shadow: 0 0 9px rgba(0,191,255,0.65),0 0 13px rgba(0,191,255,0.45),0 0 20px rgba(0,191,255,0.3); }
    80%  { text-shadow: 0 0 9px rgba(0,191,255,0.7),0 0 13px rgba(0,191,255,0.5),0 0 20px rgba(0,191,255,0.35); }
    100% { text-shadow: 0 0 8px rgba(0,191,255,0.6),0 0 12px rgba(0,191,255,0.4),0 0 18px rgba(0,191,255,0.3); }
}
</style>
</head>
<body>

<div class="caption-container">
    <div class="aura" id="aura"></div>
    <div class="word-container" id="wordContainer"></div>
</div>

<div class="candle-container">
    <img src="https://media.tenor.com/t9lIrqinJnMAAAAM/%D1%81%D0%BF%D1%96%D0%B2%D1%87%D1%83%D0%B2%D1%8E-candle.gif" alt="Candle GIF">
</div>

<script>
const words = ["A", "Candle", "For", "Jürgen"];
const wordContainer = document.getElementById('wordContainer');
const aura = document.getElementById('aura');
const fadeDuration = 1400;
const letterDelay = 300;
const pauseAfterLastWord = 4000;

// Create words and letters
const lettersAll = [];
words.forEach(wordText => {
    const wordDiv = document.createElement('div');
    wordDiv.classList.add('word');

    Array.from(wordText).forEach(char => {
        const span = document.createElement('span');
        span.classList.add('letter');
        span.textContent = char;
        wordDiv.appendChild(span);
        lettersAll.push(span);
    });

    wordContainer.appendChild(wordDiv);
});

// Animate sequence
function showSequence() {
    let index = 0;

    function showNextWord() {
        if (index > 0) {
            wordContainer.children[index - 1].style.opacity = 0;
            wordContainer.children[index - 1].querySelectorAll('.letter').forEach(l => {
                l.style.opacity = 0;
                l.style.transform = 'translate(0,0)';
                l.style.animation = '';
            });
        }

        if (index < wordContainer.children.length) {
            const letters = wordContainer.children[index].querySelectorAll('.letter');
            let delay = 0;
            letters.forEach(letter => {
                setTimeout(() => {
                    letter.style.opacity = 1;
                    const x = (Math.random() - 0.5) * 4;
                    const y = (Math.random() - 0.5) * 4;
                    letter.style.transform = `translate(${x}px, ${y}px)`;
                    letter.style.animation = `flicker ${0.9 + Math.random()*1}s infinite`;
                }, delay);
                delay += letterDelay;
            });
            wordContainer.children[index].style.opacity = 1;
            index++;
            
            // Adjust timing between words
            let delayNext;
            if (index === 1) { 
                delayNext = 1500; // ~1.5 seconds after 'A'
            } else if (index === wordContainer.children.length) {
                delayNext = pauseAfterLastWord; // pause after last word
            } else {
                delayNext = fadeDuration + 400; // normal pause
            }

            setTimeout(showNextWord, delayNext);
        } else {
            lettersAll.forEach(l => {
                l.style.opacity = 0;
                l.style.transform = 'translate(0,0)';
                l.style.animation = '';
            });
            setTimeout(showSequence, 1000); // black pause before repeating
        }
    }

    showNextWord();
}

// Sync aura with max letter glow
function animateAura() {
    let maxShadow = 0;
    lettersAll.forEach(letter => {
        const style = getComputedStyle(letter);
        const match = style.textShadow.match(/(\d+)px/);
        const shadow = match ? parseFloat(match[1]) : 0;
        if (shadow > maxShadow) maxShadow = shadow;
    });

    const scale = 1 + maxShadow / 25;
    const opacity = 0.35 + maxShadow / 80;
    aura.style.transform = `translateX(-50%) scale(${scale})`;
    aura.style.opacity = opacity;

    requestAnimationFrame(animateAura);
}

showSequence();
animateAura();
</script>

</body>
</html>
